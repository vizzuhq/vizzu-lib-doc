class t extends Error{constructor(t,e){const s=new e.ExceptionInfo(t).get_type(),n=e._vizzu_errorMessage(t,s);super("error: "+e.UTF8ToString(n)),this.name="CError"}}class e{constructor(t,e){this.tt=t,this.et=e}st(t){const e=4*t.length+1,s=this.tt._malloc(e);return this.tt.stringToUTF8(t,s,e),s}nt(t){return this.tt.UTF8ToString(t)}rt(t){return this.et.get(this.it(t))}it(e){return(...s)=>{try{return e(...s)}catch(e){throw"number"==typeof e&&Number.isInteger(e)?new t(e,this.tt):e}}}cObjectParams(){return[this.tt,this.et]}}class s extends e{constructor(t,e){super(...e.cObjectParams()),this.getId=t}ot(t){return this.et.get(this.ht(t))}ht(t){return super.it(t).bind(this,this.getId())}}class n extends s{}class r extends s{setParam(t,e=""){const s=this.st(t),n=this.st(e);try{this.ht(this.tt._anim_control_setValue)(s,n)}finally{this.tt._free(n),this.tt._free(s)}}getParam(t){const e=this.st(t);try{const t=this.ht(this.tt._anim_control_getValue)(e);return this.nt(t)}finally{this.tt._free(e)}}storeAnim(){return new n(this.ot(this.tt._chart_anim_store),this)}}class i extends s{constructor(t,e,s){super((()=>e),t),this.stops=this.lt(s)}lt(t){const e=[],s=this.getId();for(let n=0;n<40*t;n+=40)e.push({offset:this.tt.getValue(s+n,"double"),color:"rgba("+255*this.tt.getValue(s+n+8,"double")+","+255*this.tt.getValue(s+n+16,"double")+","+255*this.tt.getValue(s+n+24,"double")+","+this.tt.getValue(s+n+32,"double")+")"});return e}}class a extends s{constructor(t,e){super(e,t)}getColorGradient(t,e){return new i(this,t,e)}getString(t){return this.tt.UTF8ToString(t)}}function o(t,e){if(null===t||"object"!=typeof t)return t;if(t instanceof Function)return t;if(Array.isArray(t)&&t instanceof Array)return t.map((t=>o(t,e)));if(e&&t instanceof e)return t;const s={};for(const n in t)n in t&&(s[n]=o(t[n],e));return s}function h(t){return"object"==typeof t&&null!==t}function l(t,e,s=h,n=""){t&&null!==t&&"object"==typeof t&&Object.keys(t).forEach((r=>{const i=n+(0===n.length?"":".")+r,a=t[r];s(a)?l(a,e,s,i):e(i,a)}))}function c(t,e,s){const n=e.split(".");let r=t;n.forEach(((t,e)=>{if(!function(t){return"object"==typeof t&&null!==t}(r))throw new Error("Expected an object, but got "+typeof r);e<n.length-1?(r[t]=r[t]||("number"==typeof n[e+1]?[]:{}),r=r[t]):r[t]=s}))}class u extends s{constructor(t,e,s,n,r,i,a,o){super(t,e),this.ct=s,this.ut=n,this.dt=r,this.ft=i||h,this.yt=a||(t=>String(t).toString()),this.gt=o||((t,e)=>e)}set(t){l(t,this.setParam.bind(this),this.ft)}get(){return function(t,e){const s=t(),n={};for(const t of s)c(n,t,e(t));return Object.freeze(n)}(this.listParams.bind(this),this.getParam.bind(this))}listParams(){const t=this.ht(this.ct)(),e=this.nt(t);return JSON.parse(e)}getParam(t){const e=this.st(t);try{const s=this.ht(this.ut)(e),n=this.nt(s);return this.gt(t,n)}finally{this.tt._free(e)}}setParam(t,e){const s=this.st(t),n=this.st(this.yt(e));try{this.ht(this.dt)(s,n)}finally{this.tt._free(n),this.tt._free(s)}}}class d extends s{}class m extends s{preventDefault(){this.ht(this.tt._event_preventDefault)()}}class f extends u{}class y extends u{}class p extends u{}class g extends s{constructor(t,e){super(e,t),this.config=this.vt(),this.style=this.wt(!1),this.computedStyle=this.wt(!0),this.animOptions=this.bt()}update(t,e,s,n,r){this._t=t,this.ht(this.tt._vizzu_update)(t.getId(),e,s,n,r)}animate(t){const e=this.tt.addFunction((s=>{t(s),this.tt.removeFunction(e)}),"vi");this.ht(this.tt._chart_animate)(e)}storeSnapshot(){return new d(this.ot(this.tt._chart_store),this)}restoreSnapshot(t){this.ht(this.tt._chart_restore)(t.getId())}restoreAnim(t){this.ht(this.tt._chart_anim_restore)(t.getId())}setKeyframe(){this.ht(this.tt._chart_setKeyframe)()}addEventListener(t,e){const s=this.tt.addFunction(((t,s)=>{const n=new m((()=>t),this);e(n,JSON.parse(this.nt(s)))}),"vii"),n=this.st(t);try{this.ht(this.tt._addEventListener)(n,s)}finally{this.tt._free(n)}return s}removeEventListener(t,e){const s=this.st(t);try{this.ht(this.tt._removeEventListener)(s,e)}finally{this.tt._free(s)}this.tt.removeFunction(e)}pointerdown(t,e,s){this._t&&this.ht(this.tt._vizzu_pointerDown)(this._t.getId(),t,e,s)}pointermove(t,e,s){this._t&&this.ht(this.tt._vizzu_pointerMove)(this._t.getId(),t,e,s)}pointerup(t,e,s){this._t&&this.ht(this.tt._vizzu_pointerUp)(this._t.getId(),t,e,s)}pointerleave(t){this._t&&this.ht(this.tt._vizzu_pointerLeave)(this._t.getId(),t)}wheel(t){this._t&&this.ht(this.tt._vizzu_wheel)(this._t.getId(),t)}vt(){return new f(this.getId,this,this.tt._chart_getList,this.tt._chart_getValue,this.tt._chart_setValue,(t=>h(t)&&!this.xt(t)),(t=>this.xt(t)?t.aggregator?`${t.aggregator}(${t.name})`:t.name:String(t).toString()),((t,e)=>t.startsWith("channels.")&&t.endsWith(".set")?JSON.parse(e).map((t=>this.At(t))):e))}At(t){const e=t.match(/^(\w+)\((.*?)\)$/);return e?{name:e[2],aggregator:e[1]}:{name:t}}xt(t){return"object"==typeof t&&null!==t&&"name"in t}wt(t){return new y(this.getId,this,this.tt._style_getList,((e,s)=>this.tt._style_getValue(e,s,t)),this.tt._style_setValue)}bt(){return new p(this.getId,this,(()=>0),(()=>0),this.tt._anim_setValue)}}class v extends s{constructor(t,e){super((()=>e),t)}getValue(t){const e=this.st(t);let s,n;try{s=this.ht(this.tt._record_getValue)(e),n=this.tt.getValue(s,"i1")?this.nt(this.tt.getValue(s+8,"i8*")):this.tt.getValue(s+8,"double")}finally{this.tt._free(e)}return n}}class w extends s{getMetaInfo(){const t=this.ht(this.tt._data_metaInfo)(),e=this.nt(t);return{series:JSON.parse(e)}}addDimension(t,e,s){const n=new Uint32Array(s.length);for(let t=0;t<s.length;t++){const e=this.st(s[t]);n[t]=e}const r=4*s.length,i=this.tt._malloc(r);new Uint8Array(this.tt.HEAPU8.buffer,i,r).set(new Uint8Array(n.buffer));const a=4*e.length,o=this.tt._malloc(a);new Uint8Array(this.tt.HEAPU8.buffer,o,a).set(new Uint8Array(new Uint32Array(e).buffer));const h=this.st(t);try{this.ht(this.tt._data_addDimension)(h,i,s.length,o,e.length)}finally{this.tt._free(h);for(const t of n)this.tt._free(t);this.tt._free(o),this.tt._free(i)}}addMeasure(t,e,s){const n=new Float64Array(s),r=8*s.length,i=this.tt._malloc(r);new Uint8Array(this.tt.HEAPU8.buffer,i,r).set(new Uint8Array(n.buffer));const a=this.st(t),o=this.st(e);try{this.ht(this.tt._data_addMeasure)(a,o,i,s.length)}finally{this.tt._free(a),this.tt._free(o),this.tt._free(i)}}addRecord(t){const e=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const n=this.st(String(t[s]).toString());e[s]=n}const s=4*t.length,n=this.tt._malloc(s);new Uint8Array(this.tt.HEAPU8.buffer,n,s).set(new Uint8Array(e.buffer));try{this.ht(this.tt._data_addRecord)(n,t.length)}finally{for(const t of e)this.tt._free(t);this.tt._free(n)}}setFilter(t){const e=[0,0];if(null!==t){const s=e=>t(new v(this,e));e[0]=this.tt.addFunction(s,"ii");const n=t=>{t!==e[0]&&console.warn("Wrong pointer passed to destructor"),this.tt.removeFunction(e[0]),this.tt.removeFunction(e[1])};e[1]=this.tt.addFunction(n,"vi")}this.ht(this.tt._chart_setFilter)(...e)}}class b{constructor(t){this.kt=new FinalizationRegistry((e=>{t(e)}))}get(t){const e=t(),s=()=>e;return this.kt.register(s,e),s}}class _ extends s{toCanvasCoords(t){const e=this.ht(this.tt._chart_relToCanvasCoords)(t.x,t.y);return this.St(e)}toRelCoords(t){const e=this.ht(this.tt._chart_canvasToRelCoords)(t.x,t.y);return this.St(e)}St(t){return{x:this.tt.getValue(t,"double"),y:this.tt.getValue(t+8,"double")}}}class x extends e{constructor(t){super(t,new b(t._object_free));const e=document.createElement("canvas").getContext("2d");if(!e)throw new Error("Failed to get 2D context");this.tt.measureCanvas=e,this.tt.canvases={},this.setLogging(!1)}registerRenderer(t,e){this.tt.canvases[t.getId()]=e}version(){return this.tt.UTF8ToString(this.tt._vizzu_version())}setLogging(t){this.it(this.tt._vizzu_setLogging)(t)}getData(t){return new w(t.getId,this)}getCoordSystem(t){return new _(t.getId,this)}getAnimControl(t){return new r(t.getId,this)}createChart(){return new g(this,this.rt(this.tt._vizzu_createChart))}createCanvas(){return new a(this,this.rt(this.tt._vizzu_createCanvas))}}var A,k=(A=import.meta.url,function(t={}){var e,s,n=t;n.ready=new Promise(((t,n)=>{e=t,s=n}));var r=Object.assign({},n),i="";"undefined"!=typeof document&&document.currentScript&&(i=document.currentScript.src),A&&(i=A),i=0!==i.indexOf("blob:")?i.substr(0,i.replace(/[?#].*/,"").lastIndexOf("/")+1):"";var a,o,h=console.log.bind(console),l=console.error.bind(console);Object.assign(n,r),r=null,"object"!=typeof WebAssembly&&B("no native wasm support detected");var c,u,d,m,f,y,p,g,v=!1;function w(){var t=o.buffer;n.HEAP8=c=new Int8Array(t),n.HEAP16=d=new Int16Array(t),n.HEAPU8=u=new Uint8Array(t),n.HEAPU16=m=new Uint16Array(t),n.HEAP32=f=new Int32Array(t),n.HEAPU32=y=new Uint32Array(t),n.HEAPF32=p=new Float32Array(t),n.HEAPF64=g=new Float64Array(t)}var b=[],_=[],x=[],k=0,S=null;function B(t){l(t="Aborted("+t+")"),v=!0,t+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(t);throw s(e),e}var E,C,j=t=>t.startsWith("data:application/octet-stream;base64,");function P(t){if(t==E&&a)return new Uint8Array(a);throw"both async and sync fetching of the wasm failed"}function T(t,e,s){return function(t){return"function"==typeof fetch?fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((()=>P(t))):Promise.resolve().then((()=>P(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(s,(t=>{l(`failed to asynchronously prepare wasm: ${t}`),B(t)}))}n.locateFile?j(E="cvizzu.wasm")||(C=E,E=n.locateFile?n.locateFile(C,i):i+C):E=new URL("cvizzu.wasm",import.meta.url).href;var z=t=>{for(;t.length>0;)t.shift()(n)};function O(t,e,s="i8"){switch(s.endsWith("*")&&(s="*"),s){case"i1":case"i8":c[t>>0]=e;break;case"i16":d[t>>1]=e;break;case"i32":f[t>>2]=e;break;case"i64":B("to do setValue(i64) use WASM_BIGINT");case"float":p[t>>2]=e;break;case"double":g[t>>3]=e;break;case"*":y[t>>2]=e;break;default:B(`invalid type for setValue: ${s}`)}}function D(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(t){y[this.ptr+4>>2]=t},this.get_type=function(){return y[this.ptr+4>>2]},this.set_destructor=function(t){y[this.ptr+8>>2]=t},this.get_destructor=function(){return y[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,c[this.ptr+12>>0]=t},this.get_caught=function(){return 0!=c[this.ptr+12>>0]},this.set_rethrown=function(t){t=t?1:0,c[this.ptr+13>>0]=t},this.get_rethrown=function(){return 0!=c[this.ptr+13>>0]},this.init=function(t,e){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(e)},this.set_adjusted_ptr=function(t){y[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return y[this.ptr+16>>2]},this.get_exception_ptr=function(){if(At(this.get_type()))return y[this.excPtr>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.excPtr}}var W,F,U=t=>{for(var e="",s=t;u[s];)e+=W[u[s++]];return e},I={},M={},N=t=>{throw new F(t)};function L(t,e,s={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(t,e,s={}){var n=e.name;if(t||N(`type "${n}" must have a positive integer typeid pointer`),M.hasOwnProperty(t)){if(s.ignoreDuplicateRegistrations)return;N(`Cannot register type '${n}' twice`)}if(M[t]=e,I.hasOwnProperty(t)){var r=I[t];delete I[t],r.forEach((t=>t()))}}(t,e,s)}function $(){this.allocated=[void 0],this.freelist=[]}var R=new $,V=()=>{for(var t=0,e=R.reserved;e<R.allocated.length;++e)void 0!==R.allocated[e]&&++t;return t},H=t=>(t||N("Cannot use deleted val. handle = "+t),R.get(t).value),q=t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return R.allocate({refcount:1,value:t})}};function K(t){return this.fromWireType(f[t>>2])}var G=(t,e)=>{switch(e){case 4:return function(t){return this.fromWireType(p[t>>2])};case 8:return function(t){return this.fromWireType(g[t>>3])};default:throw new TypeError(`invalid float width (${e}): ${t}`)}},J=(t,e,s)=>{switch(e){case 1:return s?t=>c[t>>0]:t=>u[t>>0];case 2:return s?t=>d[t>>1]:t=>m[t>>1];case 4:return s?t=>f[t>>2]:t=>y[t>>2];default:throw new TypeError(`invalid integer width (${e}): ${t}`)}};function Y(t){return this.fromWireType(y[t>>2])}var Q,X,Z=(t,e,s)=>((t,e,s,n)=>{if(!(n>0))return 0;for(var r=s,i=s+n-1,a=0;a<t.length;++a){var o=t.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++a)),o<=127){if(s>=i)break;e[s++]=o}else if(o<=2047){if(s+1>=i)break;e[s++]=192|o>>6,e[s++]=128|63&o}else if(o<=65535){if(s+2>=i)break;e[s++]=224|o>>12,e[s++]=128|o>>6&63,e[s++]=128|63&o}else{if(s+3>=i)break;e[s++]=240|o>>18,e[s++]=128|o>>12&63,e[s++]=128|o>>6&63,e[s++]=128|63&o}}return e[s]=0,s-r})(t,u,e,s),tt="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,et=(t,e,s)=>{for(var n=e+s,r=e;t[r]&&!(r>=n);)++r;if(r-e>16&&t.buffer&&tt)return tt.decode(t.subarray(e,r));for(var i="";e<r;){var a=t[e++];if(128&a){var o=63&t[e++];if(192!=(224&a)){var h=63&t[e++];if((a=224==(240&a)?(15&a)<<12|o<<6|h:(7&a)<<18|o<<12|h<<6|63&t[e++])<65536)i+=String.fromCharCode(a);else{var l=a-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&a)<<6|o)}else i+=String.fromCharCode(a)}return i},st=(t,e)=>t?et(u,t,e):"",nt="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,rt=(t,e)=>{for(var s=t,n=s>>1,r=n+e/2;!(n>=r)&&m[n];)++n;if((s=n<<1)-t>32&&nt)return nt.decode(u.subarray(t,s));for(var i="",a=0;!(a>=e/2);++a){var o=d[t+2*a>>1];if(0==o)break;i+=String.fromCharCode(o)}return i},it=(t,e,s)=>{if(s??=2147483647,s<2)return 0;for(var n=e,r=(s-=2)<2*t.length?s/2:t.length,i=0;i<r;++i){var a=t.charCodeAt(i);d[e>>1]=a,e+=2}return d[e>>1]=0,e-n},at=t=>2*t.length,ot=(t,e)=>{for(var s=0,n="";!(s>=e/4);){var r=f[t+4*s>>2];if(0==r)break;if(++s,r>=65536){var i=r-65536;n+=String.fromCharCode(55296|i>>10,56320|1023&i)}else n+=String.fromCharCode(r)}return n},ht=(t,e,s)=>{if(s??=2147483647,s<4)return 0;for(var n=e,r=n+s-4,i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++i)),f[e>>2]=a,(e+=4)+4>r)break}return f[e>>2]=0,e-n},lt=t=>{for(var e=0,s=0;s<t.length;++s){var n=t.charCodeAt(s);n>=55296&&n<=57343&&++s,e+=4}return e},ct=t=>{var e=(t-o.buffer.byteLength+65535)/65536;try{return o.grow(e),w(),1}catch(t){}},ut=[null,[],[]],dt=(t,e)=>{t<128?e.push(t):e.push(t%128|128,t>>7)},mt=(t,e)=>{if("function"==typeof WebAssembly.Function)return new WebAssembly.Function((t=>{for(var e={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},s={parameters:[],results:"v"==t[0]?[]:[e[t[0]]]},n=1;n<t.length;++n)s.parameters.push(e[t[n]]);return s})(e),t);var s=[1];((t,e)=>{var s=t.slice(0,1),n=t.slice(1),r={i:127,p:127,j:126,f:125,d:124,e:111};e.push(96),dt(n.length,e);for(var i=0;i<n.length;++i)e.push(r[n[i]]);"v"==s?e.push(0):e.push(1,r[s])})(e,s);var n=[0,97,115,109,1,0,0,0,1];dt(s.length,n),n.push.apply(n,s),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var r=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(r,{e:{f:t}}).exports.f},ft=t=>Q.get(t),yt=t=>(X||(X=new WeakMap,((t,e)=>{if(X)for(var s=t;s<t+e;s++){var n=ft(s);n&&X.set(n,s)}})(0,Q.length)),X.get(t)||0),pt=[],gt=(t,e)=>Q.set(t,e);(()=>{for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);W=t})(),F=n.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},n.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Object.assign($.prototype,{get(t){return this.allocated[t]},has(t){return void 0!==this.allocated[t]},allocate(t){var e=this.freelist.pop()||this.allocated.length;return this.allocated[e]=t,e},free(t){this.allocated[t]=void 0,this.freelist.push(t)}}),R.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),R.reserved=R.allocated.length,n.count_emval_handles=V;var vt={a:(t,e,s)=>{throw new D(t).init(e,s),t},m:(t,e,s,n,r)=>{},r:(t,e,s,n)=>{L(t,{name:e=U(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?s:n},argPackAdvance:8,readValueFromPointer:function(t){return this.fromWireType(u[t])},destructorFunction:null})},q:(t,e)=>{L(t,{name:e=U(e),fromWireType:t=>{var e=H(t);return(t=>{t>=R.reserved&&0==--R.get(t).refcount&&R.free(t)})(t),e},toWireType:(t,e)=>q(e),argPackAdvance:8,readValueFromPointer:K,destructorFunction:null})},f:(t,e,s)=>{L(t,{name:e=U(e),fromWireType:t=>t,toWireType:(t,e)=>e,argPackAdvance:8,readValueFromPointer:G(e,s),destructorFunction:null})},c:(t,e,s,n,r)=>{e=U(e);var i=t=>t;if(0===n){var a=32-8*s;i=t=>t<<a>>>a}var o=e.includes("unsigned");L(t,{name:e,fromWireType:i,toWireType:o?function(t,e){return this.name,e>>>0}:function(t,e){return this.name,e},argPackAdvance:8,readValueFromPointer:J(e,s,0!==n),destructorFunction:null})},b:(t,e,s)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function r(t){var e=y[t>>2],s=y[t+4>>2];return new n(c.buffer,s,e)}L(t,{name:s=U(s),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},g:(t,e)=>{var s="std::string"===(e=U(e));L(t,{name:e,fromWireType(t){var e,n=y[t>>2],r=t+4;if(s)for(var i=r,a=0;a<=n;++a){var o=r+a;if(a==n||0==u[o]){var h=st(i,o-i);void 0===e?e=h:(e+=String.fromCharCode(0),e+=h),i=o+1}}else{var l=new Array(n);for(a=0;a<n;++a)l[a]=String.fromCharCode(u[r+a]);e=l.join("")}return xt(t),e},toWireType(t,e){var n;e instanceof ArrayBuffer&&(e=new Uint8Array(e));var r="string"==typeof e;r||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||N("Cannot pass non-string to std::string"),n=s&&r?(t=>{for(var e=0,s=0;s<t.length;++s){var n=t.charCodeAt(s);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++s):e+=3}return e})(e):e.length;var i=_t(4+n+1),a=i+4;if(y[i>>2]=n,s&&r)Z(e,a,n+1);else if(r)for(var o=0;o<n;++o){var h=e.charCodeAt(o);h>255&&(xt(a),N("String has UTF-16 code units that do not fit in 8 bits")),u[a+o]=h}else for(o=0;o<n;++o)u[a+o]=e[o];return null!==t&&t.push(xt,i),i},argPackAdvance:8,readValueFromPointer:Y,destructorFunction(t){xt(t)}})},d:(t,e,s)=>{var n,r,i,a,o;s=U(s),2===e?(n=rt,r=it,a=at,i=()=>m,o=1):4===e&&(n=ot,r=ht,a=lt,i=()=>y,o=2),L(t,{name:s,fromWireType:t=>{for(var s,r=y[t>>2],a=i(),h=t+4,l=0;l<=r;++l){var c=t+4+l*e;if(l==r||0==a[c>>o]){var u=n(h,c-h);void 0===s?s=u:(s+=String.fromCharCode(0),s+=u),h=c+e}}return xt(t),s},toWireType:(t,n)=>{"string"!=typeof n&&N(`Cannot pass non-string to C++ string type ${s}`);var i=a(n),h=_t(4+i+e);return y[h>>2]=i>>o,r(n,h+4,i+e),null!==t&&t.push(xt,h),h},argPackAdvance:8,readValueFromPointer:K,destructorFunction(t){xt(t)}})},t:(t,e)=>{L(t,{isVoid:!0,name:e=U(e),argPackAdvance:0,fromWireType:()=>{},toWireType:(t,e)=>{}})},e:()=>{B("")},H:function(t,e,s,r,i,a,o){n.canvases[t].addBezier(e,s,r,i,a,o)},I:function(t,e,s){n.canvases[t].addPoint(e,s)},h:function(t){n.canvases[t].beginDropShadow()},J:function(t){n.canvases[t].beginPolygon()},E:function(t,e,s,r){n.canvases[t].circle(e,s,r)},K:function(t){n.canvases[t].endDropShadow()},G:function(t){n.canvases[t].endPolygon()},y:function(t){n.canvases[t].frameBegin()},z:function(t){n.canvases[t].frameEnd()},C:function(t,e,s,r,i){n.canvases[t].line(e,s,r,i)},F:function(t,e,s,r,i){n.canvases[t].rectangle(e,s,r,i)},v:function(t){n.canvases[t].restore()},w:function(t){n.canvases[t].save()},l:function(t,e,s,r,i){n.canvases[t].setBrushColor(e,s,r,i)},A:function(t,e,s,r,i,a,o){n.canvases[t].setBrushGradient(e,s,r,i,a,o)},s:function(t,e,s,r){n.canvases[t].setClipCircle(e,s,r)},n:function(t){n.canvases[t].setClipPolygon()},D:function(t,e,s,r,i){n.canvases[t].setClipRect(e,s,r,i)},N:function(t,e){n.canvases[t].setDropShadowBlur(e)},M:function(t,e,s,r,i){n.canvases[t].setDropShadowColor(e,s,r,i)},L:function(t,e,s){n.canvases[t].setDropShadowOffset(e,s)},i:function(t,e){n.canvases[t].setFont(e)},k:function(t,e,s,r,i){n.canvases[t].setLineColor(e,s,r,i)},j:function(t,e){n.canvases[t].setLineWidth(e)},B:function(t,e,s,r,i,a){n.canvases[t].text(e,s,r,i,a)},x:function(t,e,s,r,i,a,o){n.canvases[t].transform(e,s,r,i,a,o)},o:t=>{var e=u.length,s=2147483648;if((t>>>=0)>s)return!1;for(var n,r,i=1;i<=4;i*=2){var a=e*(1+.2/i);a=Math.min(a,t+100663296);var o=Math.min(s,(n=Math.max(t,a))+((r=65536)-n%r)%r);if(ct(o))return!0}return!1},p:(t,e,s,n)=>{for(var r,i,a,o=0,c=0;c<s;c++){var d=y[e>>2],m=y[e+4>>2];e+=8;for(var f=0;f<m;f++)r=t,i=u[d+f],a=void 0,a=ut[r],0===i||10===i?((1===r?h:l)(et(a,0)),a.length=0):a.push(i);o+=m}return y[n>>2]=o,0},O:function(t){window.open(st(t),"_blank")},u:function(t,e,s,r){const i=n.measureCanvas;i.font=st(t);let a=i.measureText(st(e));const o=a.width;a=i.measureText("Op");const h=a.actualBoundingBoxAscent+a.actualBoundingBoxDescent;O(s,o,"double"),O(r,h,"double")}},wt=function(){var t,e,n,r;function i(t,e){var s;return wt=t.exports,o=wt.P,w(),Q=wt.Ba,s=wt.Q,_.unshift(s),function(t){if(0==--k&&S){var e=S;S=null,e()}}(),wt}return k++,(t=a,e=E,n={a:vt},r=function(t){i(t.instance)},t||"function"!=typeof WebAssembly.instantiateStreaming||j(e)||"function"!=typeof fetch?T(e,n,r):fetch(e,{credentials:"same-origin"}).then((t=>WebAssembly.instantiateStreaming(t,n).then(r,(function(t){return l(`wasm streaming compile failed: ${t}`),l("falling back to ArrayBuffer instantiation"),T(e,n,r)}))))).catch(s),{}}();n._vizzu_errorMessage=(t,e)=>(n._vizzu_errorMessage=wt.R)(t,e),n._vizzu_version=()=>(n._vizzu_version=wt.S)(),n._vizzu_setLogging=t=>(n._vizzu_setLogging=wt.T)(t),n._vizzu_createChart=()=>(n._vizzu_createChart=wt.U)(),n._vizzu_createCanvas=()=>(n._vizzu_createCanvas=wt.V)(),n._vizzu_pointerMove=(t,e,s,r,i)=>(n._vizzu_pointerMove=wt.W)(t,e,s,r,i),n._vizzu_pointerDown=(t,e,s,r,i)=>(n._vizzu_pointerDown=wt.X)(t,e,s,r,i),n._vizzu_pointerUp=(t,e,s,r,i)=>(n._vizzu_pointerUp=wt.Y)(t,e,s,r,i),n._vizzu_pointerLeave=(t,e,s)=>(n._vizzu_pointerLeave=wt.Z)(t,e,s),n._vizzu_wheel=(t,e,s)=>(n._vizzu_wheel=wt._)(t,e,s),n._vizzu_update=(t,e,s,r,i,a)=>(n._vizzu_update=wt.$)(t,e,s,r,i,a),n._style_getList=()=>(n._style_getList=wt.aa)(),n._style_setValue=(t,e,s)=>(n._style_setValue=wt.ba)(t,e,s),n._style_getValue=(t,e,s)=>(n._style_getValue=wt.ca)(t,e,s),n._chart_store=t=>(n._chart_store=wt.da)(t),n._chart_restore=(t,e)=>(n._chart_restore=wt.ea)(t,e),n._chart_anim_store=t=>(n._chart_anim_store=wt.fa)(t),n._chart_anim_restore=(t,e)=>(n._chart_anim_restore=wt.ga)(t,e),n._object_free=t=>(n._object_free=wt.ha)(t),n._chart_getList=()=>(n._chart_getList=wt.ia)(),n._chart_getValue=(t,e)=>(n._chart_getValue=wt.ja)(t,e),n._chart_setValue=(t,e,s)=>(n._chart_setValue=wt.ka)(t,e,s),n._chart_setFilter=(t,e,s)=>(n._chart_setFilter=wt.la)(t,e,s),n._record_getValue=(t,e)=>(n._record_getValue=wt.ma)(t,e),n._data_addDimension=(t,e,s,r,i,a)=>(n._data_addDimension=wt.na)(t,e,s,r,i,a),n._data_addMeasure=(t,e,s,r,i)=>(n._data_addMeasure=wt.oa)(t,e,s,r,i),n._data_addRecord=(t,e,s)=>(n._data_addRecord=wt.pa)(t,e,s),n._data_metaInfo=t=>(n._data_metaInfo=wt.qa)(t),n._addEventListener=(t,e,s)=>(n._addEventListener=wt.ra)(t,e,s),n._removeEventListener=(t,e,s)=>(n._removeEventListener=wt.sa)(t,e,s),n._event_preventDefault=t=>(n._event_preventDefault=wt.ta)(t),n._chart_animate=(t,e)=>(n._chart_animate=wt.ua)(t,e),n._chart_relToCanvasCoords=(t,e,s)=>(n._chart_relToCanvasCoords=wt.va)(t,e,s),n._chart_canvasToRelCoords=(t,e,s)=>(n._chart_canvasToRelCoords=wt.wa)(t,e,s),n._chart_setKeyframe=t=>(n._chart_setKeyframe=wt.xa)(t),n._anim_control_setValue=(t,e,s)=>(n._anim_control_setValue=wt.ya)(t,e,s),n._anim_control_getValue=(t,e)=>(n._anim_control_getValue=wt.za)(t,e),n._anim_setValue=(t,e,s)=>(n._anim_setValue=wt.Aa)(t,e,s);var bt,_t=n._malloc=t=>(_t=n._malloc=wt.Ca)(t),xt=n._free=t=>(xt=n._free=wt.Da)(t),At=t=>(At=wt.Ea)(t);function kt(){k>0||(z(b),k>0||bt||(bt=!0,n.calledRun=!0,v||(z(_),e(n),z(x))))}return n.addFunction=(t,e)=>{var s=yt(t);if(s)return s;var n=(()=>{if(pt.length)return pt.pop();try{Q.grow(1)}catch(t){if(!(t instanceof RangeError))throw t;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return Q.length-1})();try{gt(n,t)}catch(s){if(!(s instanceof TypeError))throw s;var r=mt(t,e);gt(n,r)}return X.set(t,n),n},n.removeFunction=t=>{X.delete(ft(t)),gt(t,null),pt.push(t)},n.setValue=O,n.getValue=function(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return c[t>>0];case"i16":return d[t>>1];case"i32":return f[t>>2];case"i64":B("to do getValue(i64) use WASM_BIGINT");case"float":return p[t>>2];case"double":return g[t>>3];case"*":return y[t>>2];default:B(`invalid type for getValue: ${e}`)}},n.UTF8ToString=st,n.stringToUTF8=Z,n.ExceptionInfo=D,S=function t(){bt||kt(),bt||(S=t)},kt(),t.ready});const S=new class{constructor(){this.Bt={},this.Et=null}set options(t){this.Bt={...this.Bt,...t}}get options(){return this.Bt}initialize(){return this.Et||(this.Et=this.Ct()),this.Et}async Ct(){return new x(await k(this.jt()))}jt(){const t={};if(this.Bt?.wasmUrl){const e=this.Bt.wasmUrl;t.locateFile=t=>t.endsWith(".wasm")?e:t}return t}};class B{constructor(t){this.meta={name:"coordSystem"},this.api={toCanvas:t=>this.Pt.toCanvasCoords(t),toRelative:t=>this.Pt.toRelCoords(t)},this.Pt=t}}const E=t=>{try{return t.cssRules,!0}catch(t){return!1}},C=(t,e="")=>{const s=((t="")=>[...document.styleSheets].filter(E).reduce(((e,s)=>e.concat([...s.cssRules].filter((t=>"CSSStyleRule"===t.constructor.name)).reduce(((e,s)=>[...e,...[...s.style].filter((e=>0===e.trim().indexOf("--"+t+"-"))).map((t=>t.trim()))]),[]))),[]))(e),n=getComputedStyle(t);return s.map((t=>[t,n.getPropertyValue(t).trim()])).filter((t=>""!==t[1]))};class j{constructor(t={}){this.meta={name:"cssProperties",depends:["htmlCanvas"]},this.api={prefix:"vizzu"},t?.prefix&&(this.api.prefix=t.prefix)}get hooks(){return{prepareAnimation:(t,e)=>{const s=C(this.Tt.feature.htmlCanvas.element,this.api.prefix);Array.isArray(t.target)&&t.target.forEach((({target:t})=>{t instanceof d||(t.style=((t,e,s="",n=!1)=>(e=e||{},e=t.reduce(((t,[e,r])=>(e&&((t,e,s,n)=>{e.reduce(((t,r,i)=>(i===e.length-1?!n&&t[r]||(t[r]=s):t[r]||(t[r]={}),t[r])),t)})(t,e.replace("--"+(s?s+"-":""),"").split("-"),r,n),t)),e),e))(s,t.style,this.api.prefix))})),e()}}}register(t){this.Tt=t}}class P{constructor(t){this.meta={name:"logging"},this.zt=t}enable(t){this.zt(t)}}const T=(t,e)=>{if(!t)throw new Error("Assert failed: "+e)},z=(t,e,s)=>{T(Array.isArray(e),"array is not a list");try{if(e.length!==t.dimensions[s].values.length)throw new Error("Assert failed")}catch(t){T(!1,"dimensions are not the same")}e.forEach((e=>{Array.isArray(e)&&z(t,e,s-1)}))};class O{static isPivot(t){return void 0!==t&&("dimensions"in t&&void 0!==t.dimensions||"measures"in t&&void 0!==t.measures)}static convert(t){T("object"==typeof t&&null!==t&&!Array.isArray(t),"data is not an object"),T("dimensions"in t,"data.dimensions is requreid"),T("measures"in t,"data.measures is requreid");const e=(({dimensions:t,measures:e,...s})=>Object.assign(s,{series:[]}))(t);let s=1;T(Array.isArray(t.dimensions),"data.dimensions is not a list");for(let e=0;e<t.dimensions.length;e++){const n=t.dimensions[e];T("object"==typeof n&&null!==n&&!Array.isArray(n),"data.dimensions.item is not an object"),T("name"in n,"data.dimensions.item.name is requreid"),T(void 0===n.type||"dimension"===n.type,"data.dimensions.item.type is invalid"),T("values"in n,"data.dimensions.item.values is requreid"),T(Array.isArray(n.values),"data.dimensions.item.values is not a list"),T(0!==n.values.length,"data.dimensions.item.values length is zero"),s*=n.values.length}let n=1;for(let r=0;r<t.dimensions.length;r++){const i=t.dimensions[r];let a=[];const o=[];i.values.forEach((t=>{for(let e=1;e<=n;e++)o.push(t)})),n*=i.values.length;for(let t=1;t<=s/n;t++)a=a.concat(o);const h={name:i.name,type:"dimension",values:a};e.series.push(h)}T("object"==typeof t.measures&&null!==t.measures,"data.measures is not a list or an object"),Array.isArray(t.measures)||(t.measures=[t.measures]);for(let n=0;n<t.measures.length;n++){const r=t.measures[n];T("object"==typeof r&&null!==r&&!Array.isArray(r),"data.measures.item is not an object"),T("name"in r,"data.measures.item.name is requreid"),T("values"in r,"data.measures.item.values is requreid"),T(Array.isArray(r.values),"data.measures.item.values is not a list"),z(t,r.values,t.dimensions.length-1);const i={name:r.name,type:r.type,values:r.values.flat(1/0)};void 0===i.type&&delete i.type,T(i.values.length===s,"dimensions are not the same"),e.series.push(i)}return e}}class D{constructor(){this.meta={name:"pivotData"}}get hooks(){return{prepareAnimation:(t,e)=>{Array.isArray(t.target)&&t.target.forEach((({target:t})=>{if(!(t instanceof d)&&t.data&&t.data&&O.isPivot(t.data)){if(D.Ot(t.data))throw new Error("inconsistent data form: series/records and dimensions/measures are both set.");t.data=O.convert(t.data)}})),e()}}}static Ot(t){return"series"in t||"records"in t}}class W extends Error{constructor(){super("animation canceled"),this.name="CancelError"}}class F extends Error{constructor(){super("vizzu is not initialized, use `initializing` promise"),this.name="NotInitializedError"}}class U{constructor(t){this.Dt=!1,this.meta={name:"pointerEvents",depends:["htmlCanvas"]},this.Wt={pointermove:e=>{this.Ft(e,t.pointermove.bind(t))},pointerup:e=>{this.Ft(e,t.pointerup.bind(t))},pointerdown:e=>{this.Ft(e,t.pointerdown.bind(t))},pointerleave:e=>{this.Ft(e,t.pointerleave.bind(t))},wheel:e=>{this.Ft(e,t.wheel.bind(t),"deltaY")}}}register(t){this.Ut=t,this.It=this.Ut?.feature.htmlCanvas}unregister(){this.Dt&&this.Mt()}enable(t){this.Dt=t,t?this.Nt():this.Mt()}Nt(){if(!this.Ut||!this.Wt)throw new F;this.Lt=this.Ut.feature.htmlCanvas.element;for(const[t,e]of Object.entries(this.Wt))this.Lt.addEventListener(t,e)}Mt(){if(this.Wt&&this.Lt)for(const[t,e]of Object.entries(this.Wt))this.Lt.removeEventListener(t,e);delete this.Lt}Ft(t,e,s="pointerId"){const n=[t[s]];void 0!==t.clientX&&n.push(...this.$t(t)),e(...n)}$t(t){const e={x:t.clientX,y:t.clientY};if(!this.It)throw new F;const s=this.It.clientToCanvas(e);return[s.x,s.y]}}class I{get api(){return{update:()=>{this.updateFrame(!0)}}}enable(t){this.Dt=t}constructor(t,e,s){this.Rt=1,this.meta={name:"rendering"},this.Lt=s,this.Lt.onchange=()=>{this.updateFrame(!0)},this.Dt=!0,this.Vt=!1,this.Ht=e,this.qt=t.createCanvas(),t.registerRenderer(this.qt,this)}updateFrame(t=!1){const e=this.Lt.calcSize();if(e.x>=1&&e.y>=1){const s=performance.now(),n=this.Dt?t?1:0:2;this.Ht.update(this.qt,e.x,e.y,s,n)}}frameBegin(){this.Rt=1,this.Lt.frameBegin()}frameEnd(){this.Lt.frameEnd()}setClipRect(t,e,s,n){const r=this.Lt.context;r.beginPath(),r.rect(t,e,s,n),r.clip()}setClipCircle(t,e,s){const n=this.Lt.context;n.beginPath(),n.arc(t,e,s,0,6.28318530718),n.clip()}setClipPolygon(){const t=this.Lt.context;t.closePath(),t.clip(),this.Vt=!1}setBrushColor(t,e,s,n){this.Lt.context.fillStyle="rgba("+255*t+","+255*e+","+255*s+","+n+")"}setLineColor(t,e,s,n){this.Lt.context.strokeStyle="rgba("+255*t+","+255*e+","+255*s+","+n+")"}setLineWidth(t){this.Lt.context.lineWidth=t,this.Rt=t}setFont(t){this.Lt.context.font=this.qt.getString(t)}beginDropShadow(){}setDropShadowBlur(t){this.Lt.context.shadowBlur=t}setDropShadowColor(t,e,s,n){this.Lt.context.shadowColor="rgba("+255*t+","+255*e+","+255*s+","+n+")"}setDropShadowOffset(t,e){const s=this.Lt.context;s.shadowOffsetX=t,s.shadowOffsetY=e}endDropShadow(){const t=this.Lt.context;t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor="rgba(0, 0, 0, 0)"}beginPolygon(){this.Lt.context.beginPath()}addPoint(t,e){const s=this.Lt.context;this.Vt?s.lineTo(t,e):s.moveTo(t,e),this.Vt=!0}addBezier(t,e,s,n,r,i){this.Lt.context.bezierCurveTo(t,e,s,n,r,i)}endPolygon(){const t=this.Lt.context;t.closePath(),t.fill(),0!==this.Rt&&t.stroke(),this.Vt=!1}rectangle(t,e,s,n){const r=this.Lt.context;r.beginPath(),r.rect(t,e,s,n),r.fill(),0!==this.Rt&&r.stroke()}circle(t,e,s){const n=this.Lt.context;n.beginPath(),n.arc(t,e,s,0,6.28318530718),n.fill(),0!==this.Rt&&n.stroke()}line(t,e,s,n){const r=this.Lt.context;r.beginPath(),r.moveTo(t,e),r.lineTo(s,n),0!==this.Rt&&r.stroke()}text(t,e,s,n,r){const i=this.Lt.context;i.textAlign="left",i.textBaseline="top",t+=s<0?-s:0,e+=n<0?-n:0,i.fillText(this.qt.getString(r),t,e)}setBrushGradient(t,e,s,n,r,i){const a=this.Lt.context,o=a.createLinearGradient(t,e,s,n);this.qt.getColorGradient(i,r).stops.forEach((t=>o.addColorStop(t.offset,t.color))),a.fillStyle=o}transform(t,e,s,n,r,i){this.Lt.context.transform(t,e,s,n,r,i)}save(){this.Lt.context.save()}restore(){this.Lt.context.restore()}}class M{constructor(t){return new Proxy(this,{get:(e,s)=>t.getValue(s)})}}class N{constructor(t){this.Kt=t}set(t){if(t){if(t.series){if(!Array.isArray(t.series))throw new Error("data series field is not an array");for(const e of t.series)this.Gt(e)}if("records"in t){if(!Array.isArray(t.records))throw new Error("data records field is not an array");const e=this.Kt.getMetaInfo().series;for(const s of t.records)this.Jt(s,e)}(t.filter||null===t.filter)&&this.Yt(t.filter)}}Jt(t,e){if(!Array.isArray(t)){if("object"!=typeof t||null===t)throw new Error("data record is not an array or object");t=this.Qt(t,e)}this.Kt.addRecord(t)}Qt(t,e){const s=[];return e.forEach((e=>{e.name in t?s.push(t[e.name]||this.Xt(e.type)):s.push(this.Xt(e.type))})),s}Xt(t){return"measure"===t?0:""}Gt(t){if(!t.name)throw new Error("missing series name");if(this.Zt(t))this.te(t),this.ee(t.name,t.values??[],t.categories);else{const e=t?.values??[],s=t?.type??this.se(e);if("dimension"===s){const{indexes:s,categories:n}=this.ne(e);this.ee(t.name,s,n)}else{if(!this.re(t,s))throw new Error("invalid series type: "+t.type);t.unit||(t.unit=""),this.ie(t.name,t.unit,e)}}}Zt(t){return!(!("categories"in t)||!Array.isArray(t.categories))}re(t,e){return"measure"===e||"unit"in t&&"string"==typeof t.unit}te(t){if(t.values&&Array.isArray(t.values)){const e=t.categories.length;for(const s of t.values){if(null===s)continue;const t=Number(s);if(!Number.isInteger(t))throw new Error("invalid category value (not an int): "+t);if(t<0)throw new Error("invalid category value (negative): "+t);if(t>=e)throw new Error("invalid category value (out of range): "+t)}}if(new Set(t.categories).size!==t.categories.length)throw new Error("duplicate category values")}se(t){if(Array.isArray(t)&&t.length){if("number"==typeof t[0]||null===t[0])return"measure";if("string"==typeof t[0])return"dimension"}return null}ee(t,e,s){if("string"!=typeof t)throw new Error("first parameter should be string");if(!(e instanceof Array))throw new Error("second parameter should be an array");if(!(s instanceof Array))throw new Error("third parameter should be an array");if(!this.ae(s))throw new Error("third parameter should be an array of strings");if(!this.oe(e))throw new Error("the measure index array element should be number");this.Kt.addDimension(t,e,s)}ae(t){for(const e of t)if("string"!=typeof e)return!1;return!0}oe(t){for(const e of t){const t=Number(e);if(!Number.isInteger(t)||t<0)return!1}return!0}ne(t){const e=new Map,s=[],n=new Array(t.length);for(let r=0;r<t.length;r++){const i=t[r];if("string"!=typeof i)continue;let a=e.get(i);void 0===a&&(a=s.length,e.set(i,a),s.push(i)),n[r]=a}return{categories:s,indexes:n}}ie(t,e,s){if("string"!=typeof t)throw new Error("'name' parameter should be string");if("string"!=typeof e)throw new Error("'unit' parameter should be string");if(!(s instanceof Array))throw new Error("'values' parameter should be an array");const n=s.map((t=>Number(t)));this.Kt.addMeasure(t,e,n)}Yt(t){if("function"==typeof t){const e=e=>t(new M(e));this.Kt.setFilter(e)}else{if(null!==t)throw new Error("data filter is not a function or null");this.Kt.setFilter(null)}}}var L;!function(t){t.click="click",t.pointermove="pointermove",t.pointerdown="pointerdown",t.pointerup="pointerup",t.pointerleave="pointerleave",t.wheel="wheel",t.update="update",t.drawBegin="draw-begin",t.drawComplete="draw-complete",t.backgroundDraw="background-draw",t.titleDraw="title-draw",t.subtitleDraw="subtitle-draw",t.captionDraw="caption-draw",t.logoDraw="logo-draw",t.legendBackgroundDraw="legend-background-draw",t.legendTitleDraw="legend-title-draw",t.legendLabelDraw="legend-label-draw",t.legendMarkerDraw="legend-marker-draw",t.legendBarDraw="legend-bar-draw",t.plotBackgroundDraw="plot-background-draw",t.plotAreaDraw="plot-area-draw",t.plotMarkerDraw="plot-marker-draw",t.plotMarkerLabelDraw="plot-marker-label-draw",t.plotMarkerGuideDraw="plot-marker-guide-draw",t.plotAxisDraw="plot-axis-draw",t.plotAxisTitleDraw="plot-axis-title-draw",t.plotAxisLabelDraw="plot-axis-label-draw",t.plotAxisTickDraw="plot-axis-tick-draw",t.plotAxisGuideDraw="plot-axis-guide-draw",t.plotAxisInterlacingDraw="plot-axis-interlacing-draw",t.animationBegin="animation-begin",t.animationComplete="animation-complete"}(L||(L={}));class ${constructor(t,e){this.he={},this.le=t,this.Lt=e}add(t,e){if("string"!=typeof t)throw new Error("first parameter should be string");this.ce(t).push(e)}ce(t){if(!(t in this.he)){let e=null;if(!this.ue(t)){const s=(e,s)=>{this.de(t,s,e)};e=this.le.addEventListener(t,s)}this.he[t]=[e,[]]}return this.he[t][1]}remove(t,e){if("string"!=typeof t)throw new Error("first parameter should be string");const s=this.he[t];if(!s)throw new Error("unknown event handler");const[n,r]=s;r.find(((t,s)=>t===e&&(r.splice(s,1),!0))),0===r.length&&(this.ue(t)||n&&this.le.removeEventListener(t,n),delete this.he[t])}addMany(t){for(const[e,s]of Object.entries(t))this.add(e,s)}removeMany(t){for(const[e,s]of Object.entries(t))this.remove(e,s)}de(t,e,s){const n={canceled:!1};try{const r=this.he[t];if(r)for(const i of[...r[1]]){i(this.ue(t)?this.me(e,n):s?this.fe(s,e,n):e)}}catch(t){console.log("exception in event handler: "+t)}return n.canceled}ue(t){return t.startsWith("api-")}me(t,e){return t.preventDefault=()=>{e.canceled=!0},t}fe(t,e,s){return e.preventDefault=()=>{t.preventDefault(),s.canceled=!0},(e.type.endsWith("-draw")||e.type.startsWith("draw-"))&&(e.renderingContext=this.Lt.context),e}}var R,V=Object.freeze({__proto__:null,get EventType(){return L},Events:$});!function(t){t.prepareAnimation="prepareAnimation",t.registerAnimation="registerAnimation",t.runAnimation="runAnimation"}(R||(R={}));class H{constructor(t,e){if(this.ye=t,this.pe=[],e){if(!Array.isArray(e))throw new Error("Plugins must be an array");e.forEach((t=>this.register(t,!0)))}}init(t){this.ge=t,this.pe.forEach((t=>{t.enabled&&this.ve(t)}))}enable(t,e){const s=this.we(t);this.be(s,e)}getRegisteredName(t){const e=this.pe.find((e=>e.instance===t));return e?.name}register(t,e=!0){this._e(t);const s=this.xe(t);t.register&&this.ye&&t.register(this.ye);const n={name:s,instance:t,enabled:!e};return this.pe.push(n),this.be(n,e),s}destruct(){const t=this.pe.map((t=>t.name));try{t.forEach((t=>this.unregister(t)))}finally{this.pe=[],this.ye=null}}unregister(t){const e=this.pe.findIndex((e=>e.name===t));if(-1!==e){const t=this.pe[e];this.pe.splice(e,1),t?.instance.unregister&&this.ye&&t.instance.unregister(this.ye)}}api(t){return this.we(t).instance.api||{}}hook(t,e){return{default:(s=(()=>{}))=>{this.Ae(e,t,s)}}}be(t,e){t.enabled!==e&&(t.enabled=e,t.instance.enable&&t.instance.enable(e),t.enabled?this.ve(t):this.ke(t))}ve(t){t.instance.listeners&&(t.registeredListeners=t.instance.listeners,this.ge?.addMany(t.registeredListeners))}ke(t){t.registeredListeners&&this.ge?.removeMany(t.registeredListeners),delete t.registeredListeners}_e(t){this.Se(t),this.Be(t)}Se(t){const e=this.xe(t);if(!("string"==typeof e&&e.length>0))throw new Error("Plugin must have a non empty name string")}xe(t){return t.meta?.name??(t.constructor?.name?this.Ee(t.constructor.name):void 0)}Ee(t){return"string"==typeof t&&t[0]?t[0].toLowerCase()+t.slice(1):""}Be(t){if(t.meta?.depends){if(Array.isArray(t.meta.depends)){for(const e of t.meta.depends)this.we(e);return}throw new Error("Plugin depends must be an array")}}we(t){const e=this.pe.find((e=>e.name===t));if(e)return e;throw new Error(`Plugin ${t} is not registered`)}Ae(t,e,s){const n=[...this.Ce(e),s];this.je(n,t)}Ce(t){return this.pe.filter((e=>e.enabled&&e.instance.hooks?.[t])).map((e=>e.instance.hooks[t])).sort(((t,e)=>(e.priority||0)-(t.priority||0)))}je(t,e){let s=()=>{};const n=t.map((t=>t?()=>t(e,s):()=>s()))[Symbol.iterator]();s=()=>n.next().value(),s()}}var q=Object.freeze({__proto__:null,get Hooks(){return R},PluginRegistry:H});class K{constructor(){this.meta={name:"shorthands"}}get hooks(){return{prepareAnimation:Object.assign(((t,e)=>{this.Pe(t),e()}),{priority:1})}}register(t){this.Tt=t,this.Te=Object.keys(this.Tt.config.channels)}Pe(t){if(!(t.target instanceof n)){const e=this.ze(t.target,t.options);void 0===t.options||this.Oe(t.target)||delete t.options,t.target=e}const e=this.De(t.options);e&&(t.options=e)}ze(t,e){return(this.Oe(t)?t:[this.We(t,e)]).map((t=>this.Fe(t)?t:{target:t})).map((t=>this.Ue(t)))}We(t,e){return Object.assign({target:t},void 0!==e?{options:e}:{})}Oe(t){return Array.isArray(t)}Fe(t){return"target"in t}Ue(t){const e=this.De(t.options);return Object.assign({target:this.Ie(t.target)},e?{options:e}:{})}Ie(t){if(t&&!(t instanceof d)){if(this.Me(t))return{config:this.Ne(t)};void 0!==t.config&&(t.config=this.Ne(t.config)),void 0!==t.style&&(t.style=this.Le(t.style))}return t}Le(t){return null===t?{"":null}:void 0===t?{}:t}$e(t){return"data"in t||"style"in t||"config"in t}Me(t){return!this.$e(t)}Ne(t){const{channels:e,...s}=this.Re(t);return{...s,...e?{channels:this.Ve(e)}:{}}}Re(t){if(null!==t&&"object"==typeof t){t.channels=t.channels||{};for(const e in t){const s=e;if(this.He(s)){const e=t[s];void 0!==e&&(t.channels[s]=e),delete t[s]}}}return t}He(t){return this.Te.includes(t)}Ve(t){const e={};for(const s in t){const n=s,r=t[n];void 0!==r&&(e[n]=this.qe(r))}return e}qe(t){if("string"==typeof t&&(t=[t]),this.Ke(t)?t={set:this.Ge(t)}:void 0!==t.set&&this.Ke(t.set)&&(t.set=this.Ge(t.set)),void 0!==t.attach&&this.Ke(t.attach)){const e=this.Ge(t.attach);null!==e?t.attach=e:delete t.attach}if(void 0!==t.detach&&this.Ke(t.detach)){const e=this.Ge(t.detach);null!==e?t.detach=e:delete t.detach}return t}Ke(t){return null===t||"string"==typeof t||Array.isArray(t)||"object"==typeof t&&"name"in t}Ge(t){return null===t?null:Array.isArray(t)?0===t.length?null:t.map((t=>this.Je(t))):"string"==typeof t?[this.Je(t)]:"object"==typeof t&&"name"in t?[t]:null}Je(t){if("string"==typeof t){const e=/^(\w+)\((.*?)\)$/,s=t.match(e);return s?{name:s[2],aggregator:s[1]}:{name:t}}return t}De(t){return void 0!==t&&(null===t?t={duration:0}:"string"!=typeof t&&"number"!=typeof t||(t={duration:t})),t}}class G{constructor(){this.Ye=0,this.Qe=!1,this.Xe=null,this.Ze=null,this.ts=(new Date).getTime(),this.meta={name:"tooltip",depends:["pointerEvents"]},this.listeners={pointermove:this.es.bind(this),pointerleave:this.ss.bind(this)}}get hooks(){return{prepareAnimation:(t,e)=>{Array.isArray(t.target)&&t.target.forEach((({target:t})=>{t instanceof d||(t.config||(t.config={}),"tooltip"in t.config||(t.config.tooltip=null,this.Ye++,this.Xe=null))})),e()}}}register(t){this.Ut=t}enable(t){t||null===this.Xe||(this.Ye++,setTimeout((()=>{this.ns(this.Ye)}),200))}es(t){this.ts=(new Date).getTime();const e=this.rs(t.target);e!==this.Ze&&(this.Ze=e,this.os(t))}ss(t){this.ts=(new Date).getTime(),this.Ze=null,this.os(t)}os(t){this.Ye++;const e=this.Ye,s=this.rs(t.target);null!==s?setTimeout((()=>{this.hs(e,s)}),0):setTimeout((()=>{this.ns(e)}),200)}rs(t){return t&&this.ls(t)?t.index:t&&this.cs(t)?t.parent.index:null}ls(t){return"plot-marker"===t.tagName}cs(t){return"plot-marker-label"===t.tagName}hs(t,e){this.Ye===t&&(this.Qe?setTimeout((()=>{this.hs(t,e)}),100):(this.Xe=e,this.Qe=!0,this.Ut?.animate([{target:{config:{tooltip:e}},options:{duration:this.Xe?"100ms":"250ms"}}]).then((()=>{this.Qe=!1}))))}ns(t){if(this.Ye===t){const e=(new Date).getTime()-this.ts;!this.Qe&&e>200?(this.Xe=null,this.Qe=!0,this.Ut?.animate([{target:{config:{tooltip:null}},options:{duration:"250ms"}}]).then((()=>{this.Qe=!1}))):setTimeout((()=>{this.ns(t)}),200-e)}}}class J{get api(){return{element:this.element,clientToCanvas:this.us.bind(this),canvasToClient:this.ds.bind(this)}}static extractOptions(t){const e="object"!=typeof t||t instanceof HTMLElement?{element:t}:t;if(null===e||!("element"in e))throw new Error("element not specified");let s=e.element;if("string"==typeof s&&(s=document.getElementById(s)),!(s instanceof HTMLElement))throw new Error(`Cannot find element ${e.element} to render Vizzu!`);return{element:s}}constructor(t){this.onchange=()=>{},this.fs="",this.ys=1,this.ps=1,this.gs=1,this.meta={name:"htmlCanvas"},this.vs=this.ws(t.element),this.bs=document.createElement("canvas");const e=this.bs.getContext("2d");if(!e)throw Error("Cannot get rendering context of internal canvas");this._s=e;const s=this.vs.getContext("2d");if(!s)throw Error("Cannot get rendering context of canvas");this.xs=s,this.calcSize(),this.As=this.ks(this.vs),this.Ss=()=>{this.onchange()},window.addEventListener("resize",this.Ss)}destruct(){window.removeEventListener("resize",this.Ss),this.As.disconnect(),this.Bs&&this.Bs.removeChild(this.vs)}get element(){return this.vs}get context(){return this._s}calcSize(){this.ys=window.devicePixelRatio,this.ps=+getComputedStyle(this.vs).width.slice(0,-2),this.gs=+getComputedStyle(this.vs).height.slice(0,-2);const t=`${this.ys}:${this.ps}:${this.gs}`;return t!==this.fs&&(this.vs.width=this.ps*this.ys,this.vs.height=this.gs*this.ys,this.bs.width=this.ps*this.ys,this.bs.height=this.gs*this.ys,this._s.setTransform(1,0,0,1,0,0),this._s.translate(.5,.5),this._s.scale(this.ys,this.ys)),this.fs=t,{x:this.ps,y:this.gs}}frameBegin(){this._s.clearRect(-1,-1,this.ps+2,this.gs+2)}frameEnd(){this.xs.clearRect(-1,-1,this.vs.width+1,this.vs.height+1),this.xs.drawImage(this.bs,0,0)}Es(){return this.vs.getBoundingClientRect()}Cs(t){return{x:t.width/(this.vs.width/this.ys),y:t.height/(this.vs.height/this.ys)}}us(t){const e=this.Es(),s=this.Cs(e);return{x:(t.x-e.x)/s.x,y:(t.y-e.y)/s.y}}ds(t){const e=this.Es(),s=this.Cs(e);return{x:e.x+t.x*s.x,y:e.y+t.y*s.y}}ws(t){if(t instanceof HTMLCanvasElement)return t;{const e=document.createElement("canvas");return e.style.width="100%",e.style.height="100%",this.Bs=t,this.Bs.appendChild(e),e}}ks(t){const e=new ResizeObserver((()=>{this.onchange()}));return e.observe(t),e}}class Y{constructor(t){this.js=t}store(){return this.js.storeAnim()}seek(t){const e="string"!=typeof t?t.toString():t;return this.Ps("seek",e),this}set speed(t){const e="string"!=typeof t?t.toString():t;this.Ps("speed",e)}get speed(){return Number(this.Ts("speed"))}set playState(t){this.Ps("playState",t)}get playState(){return this.Ts("playState")}set direction(t){this.Ps("direction",t)}get direction(){return this.Ts("direction")}set position(t){const e="string"!=typeof t?t.toString():t;this.Ps("position",e)}get position(){return this.Ts("position")}pause(){return this.playState="paused",this}play(){return this.playState="running",this}stop(){return this.Ps("stop"),this}cancel(){return this.Ps("cancel"),this}reverse(){return this.direction="reverse"===this.direction?"normal":"reverse",this}Ps(t,e=""){this.js.setParam(t,e)}Ts(t){return this.js.getParam(t)}}class Q{constructor(t,e,s){this.pe=s,this.zs=t,this.Lt=new J(J.extractOptions(e)),this.le=this.zs.createChart(),this.Kt=this.zs.getData(this.le),this.Os=new N(this.Kt),this.Ds=new I(this.zs,this.le,this.Lt),this.ge=new $(this.le,this.Lt),this.pe.init(this.ge)}registerBuiltins(){this.pe.register(new P(this.zs.setLogging.bind(this.zs)),!1),this.pe.register(this.Lt,!0),this.pe.register(this.Ds,!0),this.pe.register(new B(this.zs.getCoordSystem(this.le)),!0),this.pe.register(new j,!1),this.pe.register(new K,!0),this.pe.register(new D,!0),this.pe.register(new U(this.le),!0),this.pe.register(new G,!1)}start(){this.Ws||(this.Ds.updateFrame(),this.Ws=setInterval((()=>{this.Ds.updateFrame()}),25))}async prepareAnimation(t,e){const s=Object.assign({target:t},void 0!==e?{options:e}:{});await this.pe.hook(R.prepareAnimation,s).default((t=>{this.setAnimParams(t.target,t.options)}))}runAnimation(t){const e={callback:t};this.pe.hook(R.runAnimation,e).default((t=>{this.le.animate(t.callback)}))}setAnimParams(t,e){if(t instanceof n)this.le.restoreAnim(t);else for(const e of t)this.Fs(e.target,e.options);e&&this.le.animOptions.set(e)}Fs(t,e){t&&(t instanceof d?this.le.restoreSnapshot(t):(t.data&&this.Os.set(t.data),t.style&&this.le.style.set(t.style),t.config&&(this.Us(t.config),this.le.config.set(t.config)))),e&&this.le.animOptions.set(e),this.le.setKeyframe()}Us(t){t.channels&&Object.values(t.channels).forEach((t=>{Array.isArray(t?.set)&&0===t?.set.length&&(t.set=null)}))}destruct(){this.Lt.destruct(),this.Ws&&clearInterval(this.Ws),delete this.Ws}version(){return this.zs.version()}get data(){return this.Kt.getMetaInfo()}get config(){return this.le.config.get()}get style(){return this.le.style.get()}getComputedStyle(){return this.le.computedStyle.get()}on(t,e){this.ge.add(t,e)}off(t,e){this.ge.remove(t,e)}store(){return this.le.storeSnapshot()}getAnimControl(){return new Y(this.Is())}Is(){return this.zs.getAnimControl(this.le)}}const X={column:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},label:{set:[{name:"y"}]}}},groupedColumn:{channels:{x:{set:[{name:"groupedBy"},{name:"x"}]},y:{set:[{name:"y"}]},label:{set:[{name:"y"}]},color:{set:[{name:"x"}]}}},stackedColumn:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},label:{set:[{name:"y"}]},color:{set:[{name:"stackedBy"}]}}},splittedColumn:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"splittedBy"}]},color:{set:[{name:"splittedBy"}]},label:{set:[{name:"y"}]}},split:!0},percentageColumn:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"y"}]}},align:"stretch"},waterfall:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"x"}]},label:{set:[{name:"y"}]},color:{set:[{name:"y"}]}},align:"stretch"},mekko:{channels:{x:{set:[{name:"x"},{name:"groupedBy"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"groupedBy"}]}}},marimekko:{channels:{x:{set:[{name:"x"},{name:"groupedBy"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"groupedBy"}]}},align:"stretch"},bar:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},label:{set:[{name:"x"}]}}},groupedBar:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"groupedBy"},{name:"y"}]},label:{set:[{name:"x"}]},color:{set:[{name:"y"}]}}},stackedBar:{channels:{x:{set:[{name:"x"},{name:"stackedBy"}]},y:{set:[{name:"y"}]},label:{set:[{name:"x"}]},color:{set:[{name:"stackedBy"}]}}},splittedBar:{channels:{x:{set:[{name:"x"},{name:"splittedBy"}]},y:{set:[{name:"y"}]},color:{set:[{name:"splittedBy"}]},label:{set:[{name:"x"}]}},split:!0},percentageBar:{channels:{x:{set:[{name:"x"},{name:"stackedBy"}]},y:{set:[{name:"y"}]},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"x"}]}},align:"stretch"},lollipop:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},label:{set:[{name:"y"}]}},geometry:"circle"},scatter:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},noop:{set:[{name:"dividedBy"}]}},geometry:"circle"},bubbleplot:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},color:{set:[{name:"color"}]},size:{set:[{name:"size"}]},label:{set:[{name:"dividedBy"}]},noop:{set:[{name:"dividedBy"}]}},geometry:"circle"},area:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]}},geometry:"area"},stackedArea:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]}},geometry:"area"},percentageArea:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]}},align:"stretch",geometry:"area"},splittedArea:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"splittedBy"}]},color:{set:[{name:"splittedBy"}]}},split:!0,geometry:"area"},stream:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]}},geometry:"area",align:"center"},verticalStream:{channels:{x:{set:[{name:"x"},{name:"stackedBy"}]},y:{set:[{name:"y"}]},color:{set:[{name:"stackedBy"}]}},geometry:"area",align:"center"},violin:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"},{name:"splittedBy"}]},color:{set:[{name:"splittedBy"}]}},geometry:"area",align:"center",split:!0},verticalViolin:{channels:{x:{set:[{name:"x"},{name:"splittedBy"}]},y:{set:[{name:"y"}]},color:{set:[{name:"splittedBy"}]}},geometry:"area",align:"center",split:!0},line:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},color:{set:[{name:"dividedBy"}]}},geometry:"line"},verticalLine:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},color:{set:[{name:"dividedBy"}]}},geometry:"line"},pie:{channels:{x:{set:[{name:"angle"},{name:"by"}]},color:{set:[{name:"by"}]},label:{set:[{name:"angle"}]}},coordSystem:"polar"},polarColumn:{channels:{x:{set:[{name:"angle"}]},y:{set:[{name:"radius"}]},label:{set:[{name:"radius"}]}},coordSystem:"polar"},polarStackedColumn:{channels:{x:{set:[{name:"angle"}]},y:{set:[{name:"radius"},{name:"stackedBy"}]},color:{set:[{name:"stackedBy"}]}},coordSystem:"polar"},variableRadiusPie:{channels:{x:{set:[{name:"angle"},{name:"by"}]},y:{set:[{name:"radius"}]},color:{set:[{name:"by"}]},label:{set:[{name:"radius"}]}},coordSystem:"polar"},radialBar:{channels:{x:{set:[{name:"angle"}]},y:{set:[{name:"radius"}],range:{min:"-50%"}},label:{set:[{name:"angle"}]}},coordSystem:"polar"},radialStackedBar:{channels:{x:{set:[{name:"angle"},{name:"stackedBy"}]},y:{set:[{name:"radius"}],range:{min:"-50%"}},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"angle"}]}},coordSystem:"polar"},donut:{channels:{x:{set:[{name:"angle"},{name:"stackedBy"}]},y:{range:{min:"-200%",max:"100%"}},color:{set:[{name:"stackedBy"}]}},coordSystem:"polar"},nestedDonut:{channels:{x:{set:[{name:"angle"},{name:"stackedBy"}]},y:{set:[{name:"radius"}],range:{min:"-50%"}},color:{set:[{name:"stackedBy"}]},label:{set:[{name:"angle"}]}},coordSystem:"polar",align:"stretch"},polarScatter:{channels:{x:{set:[{name:"angle"}]},y:{set:[{name:"radius"}]},noop:{set:[{name:"dividedBy"}]}},coordSystem:"polar",geometry:"circle"},polarLine:{channels:{x:{set:[{name:"angle"}]},y:{set:[{name:"radius"}]},color:{set:[{name:"dividedBy"}]}},coordSystem:"polar",geometry:"line"},treemap:{channels:{size:{set:[{name:"size"},{name:"color"}]},color:{set:[{name:"color"}]},label:{set:[{name:"color"}]}}},stackedTreemap:{channels:{size:{set:[{name:"size"},{name:"dividedBy"}]},color:{set:[{name:"color"}]},label:{set:[{name:"dividedBy"}]},lightness:{set:[{name:"size"}]}}},heatmap:{channels:{x:{set:[{name:"x"}]},y:{set:[{name:"y"}]},lightness:{set:[{name:"lightness"}]}}},bubble:{channels:{size:{set:[{name:"size"}]},color:{set:[{name:"color"}]},label:{set:[{name:"color"}]}},geometry:"circle"},stackedBubble:{channels:{size:{set:[{name:"size"},{name:"stackedBy"}]},color:{set:[{name:"color"}]}},geometry:"circle"}};class Z{constructor(){this.Ms=X;for(const t in this.Ms){const e=t;this[e]=t=>this.Ns(e,t)}}Ls(){return{align:"none",coordSystem:"cartesian",orientation:"auto",angle:0,split:!1,geometry:"rectangle",channels:{x:{set:null},y:{set:null},color:{set:null},lightness:{set:null},size:{set:null},noop:{set:null},label:{set:null}}}}$s(t){const e=o(this.Ms[t]),s={...this.Ls().channels,...e.channels},n=Object.assign(this.Ls(),e);return n.channels=s,n}Rs(t){return null==t?null:Array.isArray(t)?t:[t]}Vs(t,e){if(!e)return;const s=t.channels;for(const t in s){const n=s[t];if(this.Hs(n))if("string"==typeof n.set){const t=n.set;n.set=this.Rs(e[t])}else if(Array.isArray(n.set)){const t=[];for(let s=0;s<n.set.length;s++){const r=n.set[s].name,i=this.Rs(e[r]);null!==i&&t.push(i)}n.set=t.length>0?t.flat():null}}}Hs(t){return"object"==typeof t&&null!==t&&"set"in t}qs(t,e,s){const n=e[s];void 0!==n&&(t[s]=n)}Ks(t,e){["legend","title","subtitle","caption","reverse","sort"].forEach((s=>{const n=s;this.qs(t,e,n)}))}Ns(t,e){const s=this.$s(t);return this.Vs(s,e),this.Ks(s,e),s}}class tt{static get presets(){return new Z}static options(t){S.options=t}static initialize(){return S.initialize().then((()=>{}))}constructor(t,e){this.pe=new H(this,this.Gs(t)),this.initializing=S.initialize().then((e=>(this.Tt=new Q(e,t,this.pe),this.Tt.registerBuiltins(),this.Tt.start(),this))),this.Js=this.initializing,e&&(this.initializing=this.animate([{target:e,options:{duration:0}}]).then((()=>this)))}Gs(t){return"object"==typeof t&&null!==t&&"features"in t?t.features:[]}get feature(){const t=this.Ys.bind(this);return new Proxy(t,{get:(t,e)=>this.pe.api(e)})}Ys(t,e){if(void 0!==e&&"boolean"!=typeof e)throw new Error("enabled parameter must be boolean if specified");let s,n=!1;if("string"!=typeof t){const r=t;s=this.pe.getRegisteredName(r),s||(s=this.pe.register(r,e??!0),n=!0)}else s=t;return void 0!==e&&!n&&this.pe.enable(s,e),this.pe.api(s)}animate(t,e){const n=o(t,s),r=o(e),i=Object.assign({target:n,promise:this.Js},void 0!==r?{options:r}:{});return this.pe.hook(R.registerAnimation,i).default((t=>{let e=()=>{};const s=new Promise((t=>{e=t})),i=t.promise.then((()=>this.Qs(n,r,e)));t.promise=Object.assign(i,{activated:s})})),this.Js=i.promise,this.Js}Qs(t,e,s){if(!this.Tt)throw new F;return this.Tt.prepareAnimation(t,e).then((()=>this.Xs(s)))}Xs(t){return new Promise(((e,s)=>{if(!this.Tt)throw new F;this.Tt.runAnimation((t=>{t?e(this):(s(new W),this.Js=Promise.resolve(this))})),t(this.Tt.getAnimControl())}))}get animation(){if(!this.Tt)throw new F;return this.Tt.getAnimControl()}version(){if(!this.Tt)throw new F;return this.Tt.version()}get data(){if(!this.Tt)throw new F;return this.Tt.data}get config(){if(!this.Tt)throw new F;return this.Tt.config}get style(){if(!this.Tt)throw new F;return this.Tt.style}getComputedStyle(){if(!this.Tt)throw new F;return this.Tt.getComputedStyle()}on(t,e){if(!this.Tt)throw new F;this.Tt.on(t,e)}off(t,e){if(!this.Tt)throw new F;this.Tt.off(t,e)}store(){if(!this.Tt)throw new F;return this.Tt.store()}detach(){try{this.pe.destruct()}finally{this.Tt?.destruct()}}}var et=Object.freeze({__proto__:null}),st=Object.freeze({__proto__:null}),nt=Object.freeze({__proto__:null}),rt=Object.freeze({__proto__:null}),it=Object.freeze({__proto__:null}),at=Object.freeze({__proto__:null});export{et as Anim,Y as AnimControl,r as CAnimControl,n as CAnimation,a as CCanvas,g as CChart,w as CData,e as CEnv,t as CError,m as CEvent,s as CObject,u as CProxy,v as CRecord,j as CSSProperties,W as CancelError,Q as Chart,st as Config,B as CoordSystem,nt as Data,M as DataRecord,V as Events,at as Geom,J as HtmlCanvas,P as Logging,x as Module,F as NotInitializedError,b as ObjectRegistry,D as PivotData,q as Plugins,U as PointerEvents,rt as Presets,I as Render,K as Shorthands,d as Snapshot,it as Styles,G as Tooltip,tt as Vizzu,tt as default,S as loader};
